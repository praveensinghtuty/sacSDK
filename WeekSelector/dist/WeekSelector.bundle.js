!function(e){var t={};function r(s){if(t[s])return t[s].exports;var o=t[s]={i:s,l:!1,exports:{}};return e[s].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(s,o,function(t){return e[t]}.bind(null,o));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t){!function(){class e extends HTMLElement{constructor(){super(),this._props={},Date.prototype.getWeek=function(){var e=new Date(this.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var t=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-t.getTime())/864e5-3+(t.getDay()+6)%7)/7)},this.getDateRangeOfWeek=function(e,t){var r,s,o,i;s=(r=new Date(""+t)).getDay()-1,r.setDate(r.getDate()-s),r.setDate(r.getDate()+7*(e-r.getWeek())),this.datearray=[];for(var a=0;a<7;a++)0===a?o=r.getMonth()+1+"-"+r.getDate()+"-"+r.getFullYear():(r.setDate(r.getDate()+1),6==a&&(i=r.getMonth()+1+"-"+r.getDate()+"-"+r.getFullYear())),this.datearray.push(r.getMonth()+1+"-"+r.getDate()+"-"+r.getFullYear());return o+" to "+i};var e=document.createElement("table");e.style="border-collapse: collapse;border: 1px solid black;width:100%;height:20%;table-layout:fixed;",e.id="yearTable";let t=document.createElement("tr");t.style="border: 1px solid black;";for(var r=0;r<4;r++){let e=document.createElement("td");e.style="border: 1px solid black;text-align:center;font-weight:bold;color:white",e.innerHTML=2017+r,e.id=2017+r,e.addEventListener("click",e=>{$(this).find("#yearTable").find("td").css("background-color",this._props.yearcolor),e.currentTarget.style.backgroundColor=this._props.selectedcolor,this._props.selectedyear=e.currentTarget.innerText,Number(this._props.selectedyear)===(new Date).getFullYear()?$(this).find("#"+(new Date).getWeek()).css("border",this._props.borderthickness+"px solid "+this._props.bordercolor):$(this).find("#"+(new Date).getWeek()).css("border","1px solid black");let t=this.getDateRangeOfWeek(this._props.selectedweek,this._props.selectedyear).split(" to "),r=t[0],s=t[1];this.dispatchEvent(new CustomEvent("propertiesChanged",{detail:{properties:{selectedyear:e.currentTarget.innerText,startdate:r,enddate:s,datearray:this.datearray}}}))}),t.appendChild(e)}e.appendChild(t),$(this).append(e);var s=document.createElement("table");s.style="border-collapse: collapse;border: 1px solid black;width:100%;height:calc(80% - 30px);table-layout:fixed;",s.id="weekTable";for(var o=0;o<4;o++){let e=document.createElement("tr");e.style="border: 1px solid black;";for(r=0;r<13;r++){let t=document.createElement("td");t.style="border: 1px solid black;text-align:center;",t.innerHTML=r+1+13*o,t.id=r+1+13*o,t.addEventListener("click",e=>{$(this).find("#weekTable").find("td").css("background-color",this._props.color),e.currentTarget.style.backgroundColor=this._props.selectedcolor,this._props.selectedweek=e.currentTarget.id;let t=this.getDateRangeOfWeek(this._props.selectedweek,this._props.selectedyear).split(" to "),r=t[0],s=t[1];this.dispatchEvent(new CustomEvent("propertiesChanged",{detail:{properties:{selectedweek:e.currentTarget.id,startdate:r,enddate:s,datearray:this.datearray}}}));var o=new Event("onSelect");this.dispatchEvent(o)}),t.addEventListener("mouseover",e=>{var t=this.getDateRangeOfWeek(e.currentTarget.id,this._props.selectedyear);$(this).find("#dateRange").html(t)}),t.addEventListener("mouseout",e=>{var t=this.getDateRangeOfWeek(this._props.selectedweek,this._props.selectedyear);$(this).find("#dateRange").html(t)}),e.appendChild(t)}s.appendChild(e)}$(this).append(s);var i=document.createElement("div");i.id="dateRange",i.innerHTML=this.getDateRangeOfWeek((new Date).getWeek(),(new Date).getFullYear()),i.style="width:100%;height:30px;text-align: center; font-weight: bold; color: white; background-color: rgb(88, 89, 91); font-size: 25px;",$(this).append(i)}onCustomWidgetBeforeUpdate(e){this._props={...this._props,...e}}onCustomWidgetAfterUpdate(e){if(("borderthickness"in e||"bordercolor"in e)&&Number(this._props.selectedyear)===(new Date).getFullYear()&&$(this).find("#"+(new Date).getWeek()).css("border",this._props.borderthickness+"px solid "+this._props.bordercolor),"selectedweek"in e||"selectedyear"in e){if(""===this._props.selectedyear&&(this._props.selectedyear=(new Date).getFullYear(),!1===this._props.designMode&&this.dispatchEvent(new CustomEvent("propertiesChanged",{detail:{properties:{selectedyear:this._props.selectedyear}}}))),""===this._props.selectedweek&&(this._props.selectedweek=(new Date).getWeek(),!1===this._props.designMode&&this.dispatchEvent(new CustomEvent("propertiesChanged",{detail:{properties:{selectedweek:this._props.selectedweek}}}))),!1===this._props.designMode){let e=this.getDateRangeOfWeek(this._props.selectedweek,this._props.selectedyear).split(" to "),t=e[0],r=e[1];this.dispatchEvent(new CustomEvent("propertiesChanged",{detail:{properties:{startdate:t,enddate:r,datearray:this.datearray}}}))}$(this).find("td").css("background-color",this._props.color),$(this).find("#yearTable").find("td").css("background-color",this._props.yearcolor),$(this).find("#"+this._props.selectedweek).css("background-color",this._props.selectedcolor),$(this).find("#"+this._props.selectedyear).css("background-color",this._props.selectedcolor)}if("color"in e&&($(this).find("td").css("background-color",e.color),$(this).find("#yearTable").find("td").css("background-color",this._props.yearcolor),$(this).find("#"+this._props.selectedweek).css("background-color",this._props.selectedcolor),$(this).find("#"+this._props.selectedyear).css("background-color",this._props.selectedcolor)),"yearcolor"in e&&($(this).find("#yearTable").find("td").css("background-color",this._props.yearcolor),$(this).find("#"+this._props.selectedyear).css("background-color",this._props.selectedcolor)),"datefontsize"in e&&$(this).find("#dateRange").css({fontSize:this._props.datefontsize+"px",height:Number(this._props.datefontsize)+5+"px"}),"fontcolor"in e&&$(this).find("#weekTable").find("td").css("color",e.fontcolor),"selectedcolor"in e&&($(this).find("td").css("background-color",this._props.color),$(this).find("#yearTable").find("td").css("background-color",this._props.yearcolor),$(this).find("#"+this._props.selectedweek).css("background-color",e.selectedcolor),$(this).find("#"+this._props.selectedyear).css("background-color",e.selectedcolor)),"startyear"in e){let e=Number(this._props.startyear),r=$(this).find("#yearTable").find("td");for(var t=0;t<4;t++)r[t].innerHTML=e+t,r[t].id=e+t;$(this).find("#yearTable").find("td").css("background-color",this._props.yearcolor),$(this).find("#"+this._props.selectedyear).css("background-color",this._props.selectedcolor)}}}customElements.define("com-visualbi-weekselector",e)}()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL1dlZWtTZWxlY3Rvci5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIldlZWtTZWxlY3RvciIsIkhUTUxFbGVtZW50IiwiY29uc3RydWN0b3IiLCJzdXBlciIsInRoaXMiLCJfcHJvcHMiLCJEYXRlIiwiZ2V0V2VlayIsImRhdGUiLCJnZXRUaW1lIiwic2V0SG91cnMiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsImdldERheSIsIndlZWsxIiwiZ2V0RnVsbFllYXIiLCJNYXRoIiwicm91bmQiLCJnZXREYXRlUmFuZ2VPZldlZWsiLCJ3ZWVrTm8iLCJ5IiwiZDEiLCJudW1PZmRheXNQYXN0U2luY2VMYXN0TW9uZGF5IiwicmFuZ2VJc0Zyb20iLCJyYW5nZUlzVG8iLCJkYXRlYXJyYXkiLCJnZXRNb250aCIsInB1c2giLCJ5ZWFydGFibGUiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzdHlsZSIsImlkIiwieWVhcnRhYmxlUm93IiwiaiIsInRhYmxlQ2VsbCIsImlubmVySFRNTCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiJCIsImZpbmQiLCJjc3MiLCJjdXJyZW50VGFyZ2V0IiwiYmFja2dyb3VuZENvbG9yIiwiaW5uZXJUZXh0IiwiTnVtYmVyIiwiZGF0ZVJhbmdlIiwic3BsaXQiLCJzdGFydGRhdGUiLCJlbmRkYXRlIiwiZGlzcGF0Y2hFdmVudCIsIkN1c3RvbUV2ZW50IiwiZGV0YWlsIiwicHJvcGVydGllcyIsInNlbGVjdGVkeWVhciIsImFwcGVuZENoaWxkIiwiYXBwZW5kIiwidGFibGUiLCJ0YWJsZVJvdyIsInNlbGVjdGVkd2VlayIsImV2ZW50IiwiRXZlbnQiLCJodG1sIiwib25DdXN0b21XaWRnZXRCZWZvcmVVcGRhdGUiLCJjaGFuZ2VkUHJvcGVydGllcyIsIm9uQ3VzdG9tV2lkZ2V0QWZ0ZXJVcGRhdGUiLCJ5ZWFyIiwiY2VsbHMiLCJjdXN0b21FbGVtZW50cyIsImRlZmluZSJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZWIsRUFBU2lCLE9BQU9DLFlBQWEsQ0FBRUMsTUFBTyxXQUU3RFAsT0FBT0MsZUFBZWIsRUFBUyxhQUFjLENBQUVtQixPQUFPLEtBUXZEckIsRUFBb0JzQixFQUFJLFNBQVNELEVBQU9FLEdB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T0FBVXdDLE9BQU96QyxLQUFLQyxPQUFMLGNBQThCLEVBQUcsT0FJN0gsY0FBZTJELEdBQ2xCekIsRUFBRW5DLE1BQU1vQyxLQUFLLGNBQWNBLEtBQUssTUFBTUMsSUFBSSxRQUFRdUIsRUFBaUIsV0FHaEUsa0JBQW1CQSxJQUN0QnpCLEVBQUVuQyxNQUFNb0MsS0FBSyxNQUFNQyxJQUFJLG1CQUFtQnJDLEtBQUtDLE9BQUwsT0FDekNrQyxFQUFFbkMsTUFBTW9DLEtBQUssY0FBY0EsS0FBSyxNQUFNQyxJQUFJLG1CQUFtQnJDLEtBQUtDLE9BQUwsV0FDN0RrQyxFQUFFbkMsTUFBTW9DLEtBQUssSUFBSXBDLEtBQUtDLE9BQUwsY0FBNkJvQyxJQUFJLG1CQUFtQnVCLEVBQWlCLGVBQ3RGekIsRUFBRW5DLE1BQU1vQyxLQUFLLElBQUlwQyxLQUFLQyxPQUFMLGNBQTZCb0MsSUFBSSxtQkFBbUJ1QixFQUFpQixnQkFFckYsY0FBZUEsRUFDaEIsQ0FDRSxJQUFJRSxFQUFPckIsT0FBT3pDLEtBQUtDLE9BQUwsV0FDZDhELEVBQVE1QixFQUFFbkMsTUFBTW9DLEtBQUssY0FBY0EsS0FBSyxNQUM1QyxJQUFJLElBQUl4RSxFQUFFLEVBQUVBLEVBQUUsRUFBRUEsSUFFWm1HLEVBQU1uRyxHQUFHb0UsVUFBWThCLEVBQUtsRyxFQUMxQm1HLEVBQU1uRyxHQUFHZ0UsR0FBS2tDLEVBQUtsRyxFQUd2QnVFLEVBQUVuQyxNQUFNb0MsS0FBSyxjQUFjQSxLQUFLLE1BQU1DLElBQUksbUJBQW1CckMsS0FBS0MsT0FBTCxXQUM3RGtDLEVBQUVuQyxNQUFNb0MsS0FBSyxJQUFJcEMsS0FBS0MsT0FBTCxjQUE2Qm9DLElBQUksbUJBQW1CckMsS0FBS0MsT0FBTCxpQkFPOUUrRCxlQUFlQyxPQUFPLDRCQUE2QnJFLEdBL1FwRCIsImZpbGUiOiJXZWVrU2VsZWN0b3IuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiKGZ1bmN0aW9uKCkgeyBcclxuXHJcblxyXG5cdGNsYXNzIFdlZWtTZWxlY3RvciBleHRlbmRzIEhUTUxFbGVtZW50IHtcclxuXHRcdGNvbnN0cnVjdG9yKCkge1xyXG5cdFx0XHRzdXBlcigpOyBcclxuICAgICAgdGhpcy5fcHJvcHMgPSB7fTtcclxuIERhdGUucHJvdG90eXBlLmdldFdlZWsgPSBmdW5jdGlvbigpIHtcclxuICB2YXIgZGF0ZSA9IG5ldyBEYXRlKHRoaXMuZ2V0VGltZSgpKTtcclxuICBkYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xyXG4gIC8vIFRodXJzZGF5IGluIGN1cnJlbnQgd2VlayBkZWNpZGVzIHRoZSB5ZWFyLlxyXG4gIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSArIDMgLSAoZGF0ZS5nZXREYXkoKSArIDYpICUgNyk7XHJcbiAgLy8gSmFudWFyeSA0IGlzIGFsd2F5cyBpbiB3ZWVrIDEuXHJcbiAgdmFyIHdlZWsxID0gbmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLCAwLCA0KTtcclxuICAvLyBBZGp1c3QgdG8gVGh1cnNkYXkgaW4gd2VlayAxIGFuZCBjb3VudCBudW1iZXIgb2Ygd2Vla3MgZnJvbSBkYXRlIHRvIHdlZWsxLlxyXG4gIHJldHVybiAxICsgTWF0aC5yb3VuZCgoKGRhdGUuZ2V0VGltZSgpIC0gd2VlazEuZ2V0VGltZSgpKSAvIDg2NDAwMDAwIC0gMyArICh3ZWVrMS5nZXREYXkoKSArIDYpICUgNykgLyA3KTtcclxufVxyXG5cclxudGhpcy5nZXREYXRlUmFuZ2VPZldlZWsgPSBmdW5jdGlvbih3ZWVrTm8sIHkpe1xyXG4gICAgdmFyIGQxLCBudW1PZmRheXNQYXN0U2luY2VMYXN0TW9uZGF5LCByYW5nZUlzRnJvbSwgcmFuZ2VJc1RvO1xyXG4gICAgZDEgPSBuZXcgRGF0ZSgnJyt5KycnKTtcclxuICAgIG51bU9mZGF5c1Bhc3RTaW5jZUxhc3RNb25kYXkgPSBkMS5nZXREYXkoKSAtIDE7XHJcbiAgICBkMS5zZXREYXRlKGQxLmdldERhdGUoKSAtIG51bU9mZGF5c1Bhc3RTaW5jZUxhc3RNb25kYXkpO1xyXG4gICAgZDEuc2V0RGF0ZShkMS5nZXREYXRlKCkgKyAoNyAqICh3ZWVrTm8gLSBkMS5nZXRXZWVrKCkpKSk7XHJcbiAgICBcclxuICAgIHRoaXMuZGF0ZWFycmF5ID0gW107XHJcbiAgICBmb3IodmFyIGk9MDtpPDc7aSsrKVxyXG4gICAge1xyXG4gICAgICBcclxuICAgICAgaWYoaT09PTApXHJcbiAgICAgIHtcclxuICAgICAgICByYW5nZUlzRnJvbSA9IChkMS5nZXRNb250aCgpICsgMSkgKyBcIi1cIiArIGQxLmdldERhdGUoKSArIFwiLVwiICsgZDEuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlXHJcbiAgICAgIHtcclxuICAgICAgICBkMS5zZXREYXRlKGQxLmdldERhdGUoKSArIDEpO1xyXG4gICAgICAgIGlmKGk9PTYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcmFuZ2VJc1RvID0gKGQxLmdldE1vbnRoKCkgKyAxKSArIFwiLVwiICsgZDEuZ2V0RGF0ZSgpICsgXCItXCIgKyBkMS5nZXRGdWxsWWVhcigpIDtcclxuICAgICAgICB9XHJcbiAgICAgIH0gICAgICBcclxuICAgICAgICAgXHJcbiAgICAgIHRoaXMuZGF0ZWFycmF5LnB1c2goKGQxLmdldE1vbnRoKCkgKyAxKSArIFwiLVwiICsgZDEuZ2V0RGF0ZSgpICsgXCItXCIgKyBkMS5nZXRGdWxsWWVhcigpKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIHJhbmdlSXNGcm9tICsgXCIgdG8gXCIgKyByYW5nZUlzVG87XHJcbn07XHJcblxyXG5cclxuICAgICAgXHJcbiAgICAgIHZhciB5ZWFydGFibGU9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0YWJsZVwiKTtcclxuICAgICAgeWVhcnRhYmxlLnN0eWxlID0gXCJib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO2JvcmRlcjogMXB4IHNvbGlkIGJsYWNrO3dpZHRoOjEwMCU7aGVpZ2h0OjIwJTt0YWJsZS1sYXlvdXQ6Zml4ZWQ7XCI7XHJcbiAgICAgIHllYXJ0YWJsZS5pZCA9ICd5ZWFyVGFibGUnO1xyXG4gICAgICAgbGV0IHllYXJ0YWJsZVJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0clwiKTtcclxuICAgICAgICAgIHllYXJ0YWJsZVJvdy5zdHlsZSA9IFwiYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XCJcclxuICAgICAgdmFyIHllYXIgPSAyMDE3O1xyXG4gICAgICBmb3IodmFyIGo9MDtqPDQ7aisrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgbGV0IHRhYmxlQ2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcclxuICAgICAgICAgICAgICB0YWJsZUNlbGwuc3R5bGUgPSBcImJvcmRlcjogMXB4IHNvbGlkIGJsYWNrO3RleHQtYWxpZ246Y2VudGVyO2ZvbnQtd2VpZ2h0OmJvbGQ7Y29sb3I6d2hpdGVcIjtcclxuICAgICAgICAgICAgIHRhYmxlQ2VsbC5pbm5lckhUTUwgPSB5ZWFyK2o7XHJcbiAgICAgICAgICAgICB0YWJsZUNlbGwuaWQgPSAgeWVhcitqO1xyXG4gICAgICAgICAgICAgIHRhYmxlQ2VsbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZSA9PiB7IFxyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcjeWVhclRhYmxlJykuZmluZChcInRkXCIpLmNzcyhcImJhY2tncm91bmQtY29sb3JcIix0aGlzLl9wcm9wc1tcInllYXJjb2xvclwiXSk7XHJcbiAgICAgICAgICAgICAgICBlLmN1cnJlbnRUYXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gdGhpcy5fcHJvcHNbXCJzZWxlY3RlZGNvbG9yXCJdO1xyXG4gICAgICAgICAgICAgICAgIHRoaXMuX3Byb3BzW1wic2VsZWN0ZWR5ZWFyXCJdID0gIGUuY3VycmVudFRhcmdldC5pbm5lclRleHQ7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICBpZiggTnVtYmVyKHRoaXMuX3Byb3BzW1wic2VsZWN0ZWR5ZWFyXCJdKSA9PT0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpKVxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoXCIjXCIrbmV3IERhdGUoKS5nZXRXZWVrKCkpLmNzcyhcImJvcmRlclwiLHRoaXMuX3Byb3BzW1wiYm9yZGVydGhpY2tuZXNzXCJdK1wicHggc29saWQgXCIrdGhpcy5fcHJvcHNbXCJib3JkZXJjb2xvclwiXSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICAgJCh0aGlzKS5maW5kKFwiI1wiK25ldyBEYXRlKCkuZ2V0V2VlaygpKS5jc3MoXCJib3JkZXJcIixcIjFweCBzb2xpZCBibGFja1wiKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxldCAgZGF0ZVJhbmdlID0gdGhpcy5nZXREYXRlUmFuZ2VPZldlZWsodGhpcy5fcHJvcHNbXCJzZWxlY3RlZHdlZWtcIl0sdGhpcy5fcHJvcHNbXCJzZWxlY3RlZHllYXJcIl0pLnNwbGl0KFwiIHRvIFwiKTtcclxuICAgICAgICAgICAgICAgIGxldCBzdGFydGRhdGUgPSBkYXRlUmFuZ2VbMF07XHJcbiAgICAgICAgICAgICAgICBsZXQgZW5kZGF0ZSA9IGRhdGVSYW5nZVsxXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJwcm9wZXJ0aWVzQ2hhbmdlZFwiLCB7XHJcblx0XHRcdFx0XHRkZXRhaWw6IHtcclxuXHRcdFx0XHRcdFx0cHJvcGVydGllczoge1xyXG5cdFx0XHRcdFx0XHRcdHNlbGVjdGVkeWVhcjogZS5jdXJyZW50VGFyZ2V0LmlubmVyVGV4dCxcclxuICAgICAgICAgICAgICBzdGFydGRhdGU6IHN0YXJ0ZGF0ZSxcclxuICAgICAgICAgICAgICBlbmRkYXRlOiBlbmRkYXRlLFxyXG4gICAgICAgICAgICAgIGRhdGVhcnJheTogdGhpcy5kYXRlYXJyYXlcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHR9KSk7XHJcbiAgICAgICAgICAgICAgIFxyXG5cdFx0XHRcdC8vIHZhciBldmVudCA9IG5ldyBFdmVudChcIm9uU2VsZWN0XCIpO1xyXG5cdFx0XHRcdC8vIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCk7XHJcblx0XHRcdH0pO1xyXG4gICAgICAgICAgICAgIHllYXJ0YWJsZVJvdy5hcHBlbmRDaGlsZCh0YWJsZUNlbGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgIFxyXG4gICAgICB5ZWFydGFibGUuYXBwZW5kQ2hpbGQoeWVhcnRhYmxlUm93KTtcclxuICAgICAgJCh0aGlzKS5hcHBlbmQoeWVhcnRhYmxlKTtcclxuICAgICAgdmFyIHRhYmxlPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGFibGVcIik7XHJcbiAgICAgIHRhYmxlLnN0eWxlID0gXCJib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO2JvcmRlcjogMXB4IHNvbGlkIGJsYWNrO3dpZHRoOjEwMCU7aGVpZ2h0OmNhbGMoODAlIC0gMzBweCk7dGFibGUtbGF5b3V0OmZpeGVkO1wiO1xyXG4gICAgICB0YWJsZS5pZCA9IFwid2Vla1RhYmxlXCI7XHJcbiAgICAgIGZvcih2YXIgaT0wO2k8NDtpKyspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgIGxldCB0YWJsZVJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0clwiKTtcclxuICAgICAgICAgIHRhYmxlUm93LnN0eWxlID0gXCJib3JkZXI6IDFweCBzb2xpZCBibGFjaztcIlxyXG4gICAgICAgICAgZm9yKHZhciBqPTA7ajwxMztqKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBsZXQgdGFibGVDZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xyXG4gICAgICAgICAgICAgIHRhYmxlQ2VsbC5zdHlsZSA9IFwiYm9yZGVyOiAxcHggc29saWQgYmxhY2s7dGV4dC1hbGlnbjpjZW50ZXI7XCI7XHJcbiAgICAgICAgICAgICAgdGFibGVDZWxsLmlubmVySFRNTCA9aisxKyhpKjEzKTtcclxuICAgICAgICAgICAgICB0YWJsZUNlbGwuaWQgPWorMSsoaSoxMyk7XHJcbiAgICAgICAgICAgICAgdGFibGVDZWxsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlID0+IHsgXHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoXCIjd2Vla1RhYmxlXCIpLmZpbmQoXCJ0ZFwiKS5jc3MoXCJiYWNrZ3JvdW5kLWNvbG9yXCIsdGhpcy5fcHJvcHNbXCJjb2xvclwiXSk7XHJcbiAgICAgICAgICAgICAgICBlLmN1cnJlbnRUYXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gdGhpcy5fcHJvcHNbXCJzZWxlY3RlZGNvbG9yXCJdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcHJvcHNbXCJzZWxlY3RlZHdlZWtcIl0gPSAgZS5jdXJyZW50VGFyZ2V0LmlkO1xyXG4gICAgICAgICAgICAgICAgbGV0ICBkYXRlUmFuZ2UgPSB0aGlzLmdldERhdGVSYW5nZU9mV2Vlayh0aGlzLl9wcm9wc1tcInNlbGVjdGVkd2Vla1wiXSx0aGlzLl9wcm9wc1tcInNlbGVjdGVkeWVhclwiXSkuc3BsaXQoXCIgdG8gXCIpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHN0YXJ0ZGF0ZSA9IGRhdGVSYW5nZVswXTtcclxuICAgICAgICAgICAgICAgIGxldCBlbmRkYXRlID0gZGF0ZVJhbmdlWzFdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcInByb3BlcnRpZXNDaGFuZ2VkXCIsIHtcclxuXHRcdFx0XHRcdGRldGFpbDoge1xyXG5cdFx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7XHJcblx0XHRcdFx0XHRcdFx0c2VsZWN0ZWR3ZWVrOiBlLmN1cnJlbnRUYXJnZXQuaWQsXHJcbiAgICAgICAgICAgICAgc3RhcnRkYXRlOiBzdGFydGRhdGUsXHJcbiAgICAgICAgICAgICAgZW5kZGF0ZTogZW5kZGF0ZSxcclxuICAgICAgICAgICAgICBkYXRlYXJyYXk6IHRoaXMuZGF0ZWFycmF5XHJcbiAgICAgICAgICAgICAgXHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0fSkpO1xyXG4gICAgICAgICAgICAgICAgXHJcblx0XHRcdFx0dmFyIGV2ZW50ID0gbmV3IEV2ZW50KFwib25TZWxlY3RcIik7XHJcblx0XHRcdFx0dGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxuXHRcdFx0fSk7XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgIHRhYmxlQ2VsbC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsIGUgPT57XHJcbiAgICAgICAgICAgdmFyICBkYXRlUmFuZ2UgPSB0aGlzLmdldERhdGVSYW5nZU9mV2VlayhlLmN1cnJlbnRUYXJnZXQuaWQsdGhpcy5fcHJvcHNbXCJzZWxlY3RlZHllYXJcIl0pO1xyXG4gICAgICAgICAgICQodGhpcykuZmluZChcIiNkYXRlUmFuZ2VcIikuaHRtbChkYXRlUmFuZ2UpO1xyXG4gICAgICAgICAgIFxyXG4gICAgICAgICB9KSAgICAgXHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgdGFibGVDZWxsLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCBlID0+e1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICB2YXIgIGRhdGVSYW5nZSA9IHRoaXMuZ2V0RGF0ZVJhbmdlT2ZXZWVrKHRoaXMuX3Byb3BzW1wic2VsZWN0ZWR3ZWVrXCJdLHRoaXMuX3Byb3BzW1wic2VsZWN0ZWR5ZWFyXCJdKTtcclxuICAgICAgICAgICAkKHRoaXMpLmZpbmQoXCIjZGF0ZVJhbmdlXCIpLmh0bWwoZGF0ZVJhbmdlKTtcclxuICAgICAgICAgICBcclxuICAgICAgICAgfSkgICAgIFxyXG4gICAgICAgICAgICAgIHRhYmxlUm93LmFwcGVuZENoaWxkKHRhYmxlQ2VsbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHRhYmxlUm93KTtcclxuICAgICAgICB9XHJcbiAgICAgXHJcbiAgICAgICQodGhpcykuYXBwZW5kKHRhYmxlKTsgICAgICBcclxuICAgICAgdmFyIGRhdGVSYW5nZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgIGRhdGVSYW5nZS5pZCA9IFwiZGF0ZVJhbmdlXCI7XHJcbiAgICAgIGRhdGVSYW5nZS5pbm5lckhUTUwgPSB0aGlzLmdldERhdGVSYW5nZU9mV2VlayhuZXcgRGF0ZSgpLmdldFdlZWsoKSxuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCkpO1xyXG4gICAgICBkYXRlUmFuZ2Uuc3R5bGUgPSBcIndpZHRoOjEwMCU7aGVpZ2h0OjMwcHg7dGV4dC1hbGlnbjogY2VudGVyOyBmb250LXdlaWdodDogYm9sZDsgY29sb3I6IHdoaXRlOyBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoODgsIDg5LCA5MSk7IGZvbnQtc2l6ZTogMjVweDtcIlxyXG4gICAgICAgJCh0aGlzKS5hcHBlbmQoZGF0ZVJhbmdlKTtcclxuXHJcblx0XHRcdFxyXG5cdFx0XHRcclxuXHRcdH1cclxuXHJcblx0XHRvbkN1c3RvbVdpZGdldEJlZm9yZVVwZGF0ZShjaGFuZ2VkUHJvcGVydGllcykge1xyXG5cdFx0XHR0aGlzLl9wcm9wcyA9IHsgLi4udGhpcy5fcHJvcHMsIC4uLmNoYW5nZWRQcm9wZXJ0aWVzIH07XHJcblx0XHR9XHJcblxyXG5cdFx0b25DdXN0b21XaWRnZXRBZnRlclVwZGF0ZShjaGFuZ2VkUHJvcGVydGllcykge1x0XHRcclxuICAgICAgXHRpZiAoXCJib3JkZXJ0aGlja25lc3NcIiBpbiBjaGFuZ2VkUHJvcGVydGllcyB8fCBcImJvcmRlcmNvbG9yXCIgaW4gY2hhbmdlZFByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICBpZiggTnVtYmVyKHRoaXMuX3Byb3BzW1wic2VsZWN0ZWR5ZWFyXCJdKSA9PT0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpKVxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoXCIjXCIrbmV3IERhdGUoKS5nZXRXZWVrKCkpLmNzcyhcImJvcmRlclwiLHRoaXMuX3Byb3BzW1wiYm9yZGVydGhpY2tuZXNzXCJdK1wicHggc29saWQgXCIrdGhpcy5fcHJvcHNbXCJib3JkZXJjb2xvclwiXSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgICBcclxuXHRcdFx0aWYgKFwic2VsZWN0ZWR3ZWVrXCIgaW4gY2hhbmdlZFByb3BlcnRpZXMgfHwgXCJzZWxlY3RlZHllYXJcIiBpbiBjaGFuZ2VkUHJvcGVydGllcykge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmKHRoaXMuX3Byb3BzW1wic2VsZWN0ZWR5ZWFyXCJdID09PSBcIlwiKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgdGhpcy5fcHJvcHNbXCJzZWxlY3RlZHllYXJcIl0gPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgICAgICBpZih0aGlzLl9wcm9wc1tcImRlc2lnbk1vZGVcIl0gPT09IGZhbHNlKVxyXG4gICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcInByb3BlcnRpZXNDaGFuZ2VkXCIsIHtcclxuXHRcdFx0XHRcdGRldGFpbDoge1xyXG5cdFx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7XHJcblx0XHRcdFx0XHRcdFx0c2VsZWN0ZWR5ZWFyOiB0aGlzLl9wcm9wc1tcInNlbGVjdGVkeWVhclwiXVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdH0pKTtcclxuICAgICAgICAgICAgICAgfSAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgIGlmKHRoaXMuX3Byb3BzW1wic2VsZWN0ZWR3ZWVrXCJdID09PSBcIlwiKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgdGhpcy5fcHJvcHNbXCJzZWxlY3RlZHdlZWtcIl0gPSBuZXcgRGF0ZSgpLmdldFdlZWsoKTtcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMuX3Byb3BzW1wiZGVzaWduTW9kZVwiXSA9PT0gZmFsc2UpXHJcbiAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcInByb3BlcnRpZXNDaGFuZ2VkXCIsIHtcclxuXHRcdFx0XHRcdGRldGFpbDoge1xyXG5cdFx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7XHJcblx0XHRcdFx0XHRcdFx0c2VsZWN0ZWR3ZWVrOiB0aGlzLl9wcm9wc1tcInNlbGVjdGVkd2Vla1wiXVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdH0pKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgIGlmKHRoaXMuX3Byb3BzW1wiZGVzaWduTW9kZVwiXSA9PT0gZmFsc2UpXHJcbiAgICAgICAgICAgICAgIHtcclxuICAgICAgICBsZXQgIGRhdGVSYW5nZSA9IHRoaXMuZ2V0RGF0ZVJhbmdlT2ZXZWVrKHRoaXMuX3Byb3BzW1wic2VsZWN0ZWR3ZWVrXCJdLHRoaXMuX3Byb3BzW1wic2VsZWN0ZWR5ZWFyXCJdKS5zcGxpdChcIiB0byBcIik7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3RhcnRkYXRlID0gZGF0ZVJhbmdlWzBdO1xyXG4gICAgICAgICAgICAgICAgbGV0IGVuZGRhdGUgPSBkYXRlUmFuZ2VbMV07XHJcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcInByb3BlcnRpZXNDaGFuZ2VkXCIsIHtcclxuXHRcdFx0XHRcdGRldGFpbDoge1xyXG5cdFx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7XHJcblx0XHRcdFx0XHRcdFx0c3RhcnRkYXRlOiBzdGFydGRhdGUsXHJcbiAgICAgICAgICAgICAgZW5kZGF0ZTogZW5kZGF0ZSxcclxuICAgICAgICAgICAgICBkYXRlYXJyYXk6IHRoaXMuZGF0ZWFycmF5XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0fSkpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgJCh0aGlzKS5maW5kKFwidGRcIikuY3NzKFwiYmFja2dyb3VuZC1jb2xvclwiLHRoaXMuX3Byb3BzIFtcImNvbG9yXCJdKTtcclxuICAgICAgICAkKHRoaXMpLmZpbmQoJyN5ZWFyVGFibGUnKS5maW5kKFwidGRcIikuY3NzKFwiYmFja2dyb3VuZC1jb2xvclwiLHRoaXMuX3Byb3BzIFtcInllYXJjb2xvclwiXSk7XHJcblx0XHRcdFx0JCh0aGlzKS5maW5kKFwiI1wiK3RoaXMuX3Byb3BzW1wic2VsZWN0ZWR3ZWVrXCJdKS5jc3MoXCJiYWNrZ3JvdW5kLWNvbG9yXCIsdGhpcy5fcHJvcHMgW1wic2VsZWN0ZWRjb2xvclwiXSk7XHJcbiAgICAgICAgJCh0aGlzKS5maW5kKFwiI1wiK3RoaXMuX3Byb3BzW1wic2VsZWN0ZWR5ZWFyXCJdKS5jc3MoXCJiYWNrZ3JvdW5kLWNvbG9yXCIsdGhpcy5fcHJvcHNbXCJzZWxlY3RlZGNvbG9yXCJdKTtcclxuXHRcdFx0fVxyXG4gICAgICBcclxuICAgICAgXHRpZiAoXCJjb2xvclwiIGluIGNoYW5nZWRQcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAkKHRoaXMpLmZpbmQoXCJ0ZFwiKS5jc3MoXCJiYWNrZ3JvdW5kLWNvbG9yXCIsY2hhbmdlZFByb3BlcnRpZXNbXCJjb2xvclwiXSk7XHJcbiAgICAgICAgJCh0aGlzKS5maW5kKCcjeWVhclRhYmxlJykuZmluZChcInRkXCIpLmNzcyhcImJhY2tncm91bmQtY29sb3JcIix0aGlzLl9wcm9wcyBbXCJ5ZWFyY29sb3JcIl0pO1xyXG4gICAgICAgICQodGhpcykuZmluZChcIiNcIit0aGlzLl9wcm9wcyBbXCJzZWxlY3RlZHdlZWtcIl0pLmNzcyhcImJhY2tncm91bmQtY29sb3JcIix0aGlzLl9wcm9wcyBbXCJzZWxlY3RlZGNvbG9yXCJdKTtcclxuICAgICAgICAkKHRoaXMpLmZpbmQoXCIjXCIrdGhpcy5fcHJvcHNbXCJzZWxlY3RlZHllYXJcIl0pLmNzcyhcImJhY2tncm91bmQtY29sb3JcIix0aGlzLl9wcm9wc1tcInNlbGVjdGVkY29sb3JcIl0pO1xyXG5cdFx0XHR9XHJcbiAgICAgIFx0aWYgKFwieWVhcmNvbG9yXCIgaW4gY2hhbmdlZFByb3BlcnRpZXMpIHtcclxuICAgICAgICAkKHRoaXMpLmZpbmQoJyN5ZWFyVGFibGUnKS5maW5kKFwidGRcIikuY3NzKFwiYmFja2dyb3VuZC1jb2xvclwiLHRoaXMuX3Byb3BzIFtcInllYXJjb2xvclwiXSk7XHJcbiAgICAgICAgJCh0aGlzKS5maW5kKFwiI1wiK3RoaXMuX3Byb3BzW1wic2VsZWN0ZWR5ZWFyXCJdKS5jc3MoXCJiYWNrZ3JvdW5kLWNvbG9yXCIsdGhpcy5fcHJvcHNbXCJzZWxlY3RlZGNvbG9yXCJdKTtcclxuXHRcdFx0fVxyXG4gICAgICBcdGlmIChcImRhdGVmb250c2l6ZVwiIGluIGNoYW5nZWRQcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgJCh0aGlzKS5maW5kKCcjZGF0ZVJhbmdlJykuY3NzKHtcImZvbnRTaXplXCI6dGhpcy5fcHJvcHMgW1wiZGF0ZWZvbnRzaXplXCJdK1wicHhcIixcImhlaWdodFwiOihOdW1iZXIodGhpcy5fcHJvcHMgW1wiZGF0ZWZvbnRzaXplXCJdKSs1KStcInB4XCJ9KTtcclxuXHRcdFx0fVxyXG4gICAgICBcclxuICAgICAgXHJcbiAgICAgIGlmIChcImZvbnRjb2xvclwiIGluIGNoYW5nZWRQcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAkKHRoaXMpLmZpbmQoJyN3ZWVrVGFibGUnKS5maW5kKFwidGRcIikuY3NzKFwiY29sb3JcIixjaGFuZ2VkUHJvcGVydGllc1tcImZvbnRjb2xvclwiXSk7XHJcblx0XHRcdH1cclxuICAgICAgICAgICAgXHJcbiAgICAgIGlmIChcInNlbGVjdGVkY29sb3JcIiBpbiBjaGFuZ2VkUHJvcGVydGllcykge1xyXG4gICAgICAgJCh0aGlzKS5maW5kKFwidGRcIikuY3NzKFwiYmFja2dyb3VuZC1jb2xvclwiLHRoaXMuX3Byb3BzIFtcImNvbG9yXCJdKTtcclxuICAgICAgICAkKHRoaXMpLmZpbmQoJyN5ZWFyVGFibGUnKS5maW5kKFwidGRcIikuY3NzKFwiYmFja2dyb3VuZC1jb2xvclwiLHRoaXMuX3Byb3BzIFtcInllYXJjb2xvclwiXSk7XHJcbiAgICAgICAgJCh0aGlzKS5maW5kKFwiI1wiK3RoaXMuX3Byb3BzW1wic2VsZWN0ZWR3ZWVrXCJdKS5jc3MoXCJiYWNrZ3JvdW5kLWNvbG9yXCIsY2hhbmdlZFByb3BlcnRpZXNbXCJzZWxlY3RlZGNvbG9yXCJdKTtcclxuICAgICAgICAkKHRoaXMpLmZpbmQoXCIjXCIrdGhpcy5fcHJvcHNbXCJzZWxlY3RlZHllYXJcIl0pLmNzcyhcImJhY2tncm91bmQtY29sb3JcIixjaGFuZ2VkUHJvcGVydGllc1tcInNlbGVjdGVkY29sb3JcIl0pO1xyXG5cdFx0XHR9XHJcbiAgICAgIGlmKFwic3RhcnR5ZWFyXCIgaW4gY2hhbmdlZFByb3BlcnRpZXMpXHJcbiAgICAgICAgeyAgICAgICAgICBcclxuICAgICAgICAgIGxldCB5ZWFyID0gTnVtYmVyKHRoaXMuX3Byb3BzW1wic3RhcnR5ZWFyXCJdKTtcclxuICAgICAgICAgIGxldCBjZWxscyA9ICQodGhpcykuZmluZChcIiN5ZWFyVGFibGVcIikuZmluZChcInRkXCIpO1xyXG4gICAgICAgICAgZm9yKHZhciBpPTA7aTw0O2krKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGNlbGxzW2ldLmlubmVySFRNTCA9IHllYXIraTtcclxuICAgICAgICAgICAgICBjZWxsc1tpXS5pZCA9IHllYXIraTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAvLyAkKHRoaXMpLmZpbmQoXCIjeWVhclRhYmxlXCIpLmZpbmQoXCJ0ZFwiKS5jc3MoXCJiYWNrZ3JvdW5kLWNvbG9yXCIsdGhpcy5fcHJvcHMgW1wiY29sb3JcIl0pO1xyXG4gICAgICAgICAgJCh0aGlzKS5maW5kKCcjeWVhclRhYmxlJykuZmluZChcInRkXCIpLmNzcyhcImJhY2tncm91bmQtY29sb3JcIix0aGlzLl9wcm9wcyBbXCJ5ZWFyY29sb3JcIl0pO1xyXG4gICAgICAgICAgJCh0aGlzKS5maW5kKFwiI1wiK3RoaXMuX3Byb3BzW1wic2VsZWN0ZWR5ZWFyXCJdKS5jc3MoXCJiYWNrZ3JvdW5kLWNvbG9yXCIsdGhpcy5fcHJvcHNbXCJzZWxlY3RlZGNvbG9yXCJdKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJjb20tdmlzdWFsYmktd2Vla3NlbGVjdG9yXCIsIFdlZWtTZWxlY3Rvcik7XHJcbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIifQ==